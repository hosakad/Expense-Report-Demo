{% extends "common/framework.html" %}
{% block body %}
<h1>{{get_text('TITLE_EXPENSE_DETAIL')}}</h1>
<article id="expense_detail">
	<form id="form_expense_detail">
		<p>{{get_text('LABEL_MAIN_EXPENSE_NAME')}}:<input name="name" type="text" value="{{expense['name']}}" required></p>
		<p>{{get_text('LABEL_MAIN_DATE')}}:<input name="date" type="date" value="{{expense['date']}}" required></p>
		<p>{{get_text('LABEL_MAIN_CURRENCY')}}:
			<select name="currency">
				{% for currency in currency_list %}
					{% if currency == expense['currency'] %}
					<option value="{{currency}}" selected>{{get_text(currency)}}</option>
					{% else %}
					<option value="{{currency}}">{{get_text(currency)}}</option>
					{% endif %}
				{% endfor %}
			</select>	
		</p>
		<p>{{get_text('LABEL_MAIN_AMOUNT_MONEY')}}:<input name="amount" type="number" value="{{expense['amount']}}" required></p>
		<p>{{get_text('LABEL_MAIN_DESCRIPTION')}}:<input name="description" type="text" value="{{expense['description']}}"></p>
		<input type="hidden" name="id" value="{{expense['id']}}">
		<input type="hidden" name="receipt_image" value="{{expense['receipt_image']}}">
	</form>
	<form id="receipt_image_form">
	{% if expense['receipt_image'] %}
	<p>{{get_text('LABEL_MAIN_RECEIPT_IMAGE')}}:</p>
	<p>
		<img src="../receipt/{{expense['receipt_image']}}" />
		<button class="button_motion" id="buttun_delete_receipt_image" type="submit" form="receipt_image_form" formaction="../delete_receipt_image" formmethod="post">
			<span>{{get_text('BUTTON_DELETE_RECEIPT_IMAGE')}}</span>
		</button>
		<input type="hidden" name="id" value="{{expense['id']}}">
	</p>
	{% else %}
	<p>{{get_text('LABEL_MAIN_RECEIPT_IMAGE')}}:<input name="receipt_image" type="file" accept="image/*, .pdf"></p>
	<p>
		<button class="button_motion" id="buttun_update_receipt_image" type="submit" form="receipt_image_form" formaction="../update_receipt_image" formmethod="post">
			<span>{{get_text('BUTTON_UPDATE_RECEIPT_IMAGE')}}</span>
		</button>
		<input type="hidden" name="receipt_image" value="{{expense['receipt_image']}}">
		<input type="hidden" name="id" value="{{expense['id']}}">
	</p>
	{% endif %}
	</form>
	<form id="empty_form"></form>
	<div>
		<button class="button_motion" id="button_update_expense" type="submit" form="form_expense_detail" formaction="../update_expense" formmethod="post">
			<span>{{get_text('BUTTON_UPDATE')}}</span>
		</button>
		<button class="button_motion" id="button_list_expense" onclick="location.href='../expense_list_html'">
			<span>{{get_text('BUTTON_BACK_TO_LIST')}}</span>
		</button>
	</div>
	<div>
		<script>
			function are_you_sure() {
				result = window.confirm("{{get_text('MSG_CONFIRM_DELETE')}}");
				if (result) {
					form_report = document.getElementById("form_expense_detail");
					form_report.action="../delete_expense";
					form_report.method="post";
					form_report.submit();
				}
			}
		</script>
		<button class="button_motion" id="button_delete_expense" onclick="are_you_sure();">
			<span>{{get_text('BUTTON_DELETE')}}</span>
		</button>
	</div>
</article>
{% endblock %}